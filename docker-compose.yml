services:
  guacd:
    image: guacamole/guacd:1.5.5
    container_name: guacd
    restart: unless-stopped
    expose: [ "4822" ]

  furu-web:
    build:
      context: .
      target: web
    container_name: furu-web
    depends_on: [ furu-api ]
    env_file: .env
    ports: [ "3000:3000" ]

  furu-api:
    build:
      context: .
      target: api
    container_name: furu-api
    depends_on: [ furu-display ]
    env_file: .env
    ports: [ "4000:4000" ]

  furu-display:
    build:
      context: .
      target: display
    container_name: furu-display
    env_file: .env
    ports: [ "9091:9091" ]